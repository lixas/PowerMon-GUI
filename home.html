<template>
				<div class="page no-navbar">
					<div class="page-content">
						<div class="navbar">
							<div class="navbar-bg"></div>
							<div class="navbar-inner">
								<div class="left">
									<a class="link panel-open icon-only" data-panel="left">
										<i class="icon f7-icons">bars</i>
									</a>
								</div>
								<div class="title">Power Monitor</div>
								<div class="right">
									<a class="link icon-only navbar-tooltip">
										<i class="icon f7-icons">bolt_slash</i>
									</a>
								</div>
							</div>
						</div>
	<!-- main content begin -->
						<div class="block">
							<p class="text-align-center">Updated 2023-11-26</p>
	<!-- Area Chart element -->
							<div class="area-chart area-chart-lines"></div>
	
							<div class="data-table">
								<table>
									<thead>
										<tr>
											<th class="label-cell">Measurement</th>
											<th class="numeric-cell">Value</th>
											<th class="text-cell">Unit</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td class="label-cell">Voltage</td>
											<td class="numeric-cell">4.20</td>
											<td class="text-cell">V</td>
										</tr>
										<tr>
											<td class="label-cell">Current</td>
											<td class="numeric-cell">1.39</td>
											<td class="text-cell">A</td>
										</tr>
										<tr>
											<td class="label-cell">Power</td>
											<td class="numeric-cell">5.838</td>
											<td class="text-cell">W</td>
										</tr>
										<tr>
											<td class="label-cell">Time</td>
											<td colspan="2" class="numeric-cell">74:37:13</td>
										</tr>
									</tbody>
								</table>
							</div>
	<!-- Remote control buttons -->
							<div class="block-title">
								<a href="#" @click=${remoteControlInfo}><i class="icon f7-icons">info_circle</i></a>
								 Device remote control
							</div>
							<div class="block block-strong block-outline-ios">
								<div class="grid grid-cols-4 grid-gap">
									<button class="button button-tonal">Setup</button>
									<button class="button button-tonal">-</button>
									<button class="button button-tonal">+</button>
									<button class="button button-tonal">Enter</button>
								</div>
							</div>
							<div class="block-footer"></div>
<!-- / Remote control buttons -->
						</div>
					</div>
				</div>

</template>

<script>
  export default (props, { $f7, $onMounted, $onBeforeUnmount }) => {
		
		const remoteControlInfo = () => {
        $f7.dialog.alert('Using these buttons you can control device. You must have visual with the device to see what you are doing.', 'Remote Control');
		}
		
		
		
		let navbarTooltip;
    let areaLines;

    // helpers data for axis
    const dates = [];
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth();
    for (let i = 0; i < 4; i += 1) {
      dates.push(new Date(year, month - (3 - i)))
    }
    const axisDateFormat = Intl.DateTimeFormat(undefined, { month: 'short', year: 'numeric' })
    const tooltipDateFormat = Intl.DateTimeFormat(undefined, { month: 'long', year: 'numeric' })

    $onMounted(() => {

			navbarTooltip = $f7.tooltip.create({
				targetEl: '.navbar-tooltip',
				text: 'One more tooltip<br />with more text<br /><em>and custom formatting</em>',
			});
			
      areaLines = $f7.areaChart.create({
        el: '.area-chart-lines',
        tooltip: true,
        axis: true,
        axisLabels: dates,
        legend: true,
        toggleDatasets: true,
        lineChart: true,
        formatAxisLabel(date) {
          return axisDateFormat.format(date);
        },
        formatTooltipAxisLabel(date) {
          return tooltipDateFormat.format(date);
        },
        datasets: [
					{
						label: 'Voltage',
						color: '#f00',
						values: [220, 225, 218, 225],
					},
					{
						label: 'Current',
						color: '#00f',
						values: [50, 75, 83, 67],
					},
					{
						label: 'Energy',
						color: '#0f0',
						values: [0, 100, 250, 307],
					},
        ]
      });
			
			setTimeout(() => {
				areaLines.update({
					axisLabels: [9, 8, 7, 6, 5],
					datasets: [
						{
							label: 'Voltage',
							color: '#f00',
							values: [220, 225, 218, 225, 210],
						},
						{
							label: 'Current',
							color: '#00f',
							values: [50, 75, 83, 67, 55],
						},
						{
							label: 'Energy',
							color: '#0f0',
							values: [0, 100, 250, 307, 300],
						},
					],
				});
			}, '5000');	
		
    }) //END $onMounted

    $onBeforeUnmount(() => {
      areaLines.destroy();
    })

    return $render;
  }
</script>